{% extends "base_logged_in.html" %}
{% from "macros/buttons.html" import submit_button, button %}
{% block title %}{% block subtitle %}{% endblock %}Discussion{% endblock %}
{% block contentheading %} {{ pregunta.titulo }} {% endblock %}
{% block contentsubheading %} {{ pregunta.descripcion }} {% endblock %}
{% block maincontent %}
    {% block answercontent %}
        <div class="answerquestiondiv">
            <form action="discussion/report/question" method="post">
                <dl>
                    <dt>Reportar pregunta:</dt>
                    <dd>
                        <input type="text" name="descripcion" placeholder="Descripcion" />
                        <input name="id_pregunta" type="hidden" value="{{pregunta.id}}" />
                    </dd>
                </dl>
                <p class="alignright">{{ submit_button('bluebg', 'Enviar') }}{{ button('redbg', redirect_to, 'Cancel') }}</p>
            </form>
            <form action="/discussion/question/answer" method="post">
                <dl>
                    <dt>Añadir respuesta:</dt>
                    <dd>
                        <input type="text" name="descripcion" placeholder="Descripcion" autofocus />
                        <input name="id_pregunta" type="hidden" value="{{pregunta.id}}" />
                    </dd>
                </dl>
                <p class="alignright">{{ submit_button('bluebg', 'Crear') }}{{ button('redbg', redirect_to, 'Cancel') }}</p>
            </form>
        </div>
        {% for respuesta in pregunta.respuestas %}
            <div class="answerdiv">
                <p class="answertext">{{respuesta.descripcion}}</p><br>
                <p class="answertext">{{respuesta.creador}}</p>
                <p class="datetext">{{respuesta.fechaCreacion.strftime("%A, %d of %B %Y at %I:%M %p")}}</p>            
                <form action="/discussion/report/question/answer" method="post">
                    <dl>
                        <dt>Reportar respuesta:</dt>
                        <dd>
                            <input type="text" name="descripcion" placeholder="Descripcion" />
                            <input name="id_pregunta" type="hidden" value="{{pregunta.id}}" />
                            <input name="id_respuesta" type="hidden" value="{{respuesta.id}}" />
                        </dd>
                    </dl>
                    <p class="alignright">{{ submit_button('bluebg', 'Enviar') }}{{ button('redbg', redirect_to, 'Cancel') }}</p>
                </form>
                <form action="/discussion/question/answer/comment" method="post">
                    <dl>
                        <dt>Añadir comentario</dt>
                        <dd>
                            <input type="text" name="descripcion" placeholder="Descripcion" /><br>
                            <input name="sentimiento" type="radio" value="1" />Positivo
                            <input name="sentimiento" type="radio" value="2" checked />Neutral
                            <input name="sentimiento" type="radio" value="3" />Negativo
                            <input name="id_pregunta" type="hidden" value="{{pregunta.id}}" />
                            <input name="id_respuesta" type="hidden" value="{{respuesta.id}}" />
                        </dd>
                    </dl>
                    <p class="alignright">{{ submit_button('bluebg', 'Crear') }}{{ button('redbg', redirect_to, 'Cancel') }}</p>
                </form>
            </div>
            {% for comentario in respuesta.comentarios %}
                {% if comentario.sentimiento == 1%}
                    <div class="commentdiv1">
                {% elif comentario.sentimiento == 2 %}
                    <div class="commentdiv2">
                {% elif comentario.sentimiento == 3 %}
                    <div class="commentdiv3">
                {% endif %} 
                    <p class="commenttext">{{comentario.descripcion}}</p><br>
                    <p class="commenttext">{{comentario.creador}}</p>
                    <p class="datetext">{{comentario.fechaCreacion.strftime("%A, %d of %B %Y at %I:%M %p")}}</p>
                    <form action="/discussion/report/question/answer/comment" method="post">
                        </dl>
                            <dt>Reportar respuesta:</dt>
                            <dd>
                                <input type="text" name="descripcion" placeholder="Descripcion" />
                                <input name="id_pregunta" type="hidden" value="{{pregunta.id}}" />
                                <input name="id_respuesta" type="hidden" value="{{respuesta.id}}" />
                                <input name="id_comentario" type="hidden" value="{{comentario.id}}" />
                            </dd>
                        </dl>
                        <p class="alignright">{{ submit_button('bluebg', 'Enviar') }}{{ button('redbg', redirect_to, 'Cancel') }}</p>
                    </form>
                </div>
            {% endfor %}
        {% endfor %}        
    {% endblock %}
{% endblock %}